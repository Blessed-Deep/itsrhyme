<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="theme-color" content="#001a33">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="ImageSlider.css">
	<script src="script.js"></script>
	<script src="./app.js"></script>
	<link rel="stylesheet" href="https://cdn.plyr.io/3.7.2/plyr.css" />
	<script src="https://cdn.plyr.io/3.7.2/plyr.js"></script>
	<title>AamarKabita</title>
	
</head>
<body>
			<div class="tophead">CREATED BY BLESSED DEEP</div>
			<div class="header">
					<a href="#default" class="logo">AamarKabita</a>	
					
				<div class="LoaderICO">
					<div class="lds-ripple"><div></div><div></div></div>
					</div>
			
				<div class="header-pensearch">
					<div class="container" >              
						<svg id="SearchingPen" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 880 235">
							<rect class="cls-header" x="514" y="40" width="320" height="180" rx="74"/>
							<g id="searchArea" style="transform-origin: right; transform: scaleX(0.38);">
							
								<g id="Go" >
									<path class="cls-1" d="M207.87,177.26H155.25a23.33,23.33,0,0,0-9.84,2L93.58,204.2c-6,2.88-6,7.75-.11,10.67l54.76,26.91a23.18,23.18,0,0,0,10,2.05h49.68c7.94,0,14.38-3.29,14.38-7.36V184.62C222.25,180.56,215.81,177.26,207.87,177.26Z" transform="translate(-89.05 -82.46)"/>
									<path class="cls-2" d="M187.09,218.42l-11.84-8.37a28.16,28.16,0,0,1-5.55,5.34,16.64,16.64,0,0,1-2,1.57l-.47.6,13.64,9.64a5.37,5.37,0,1,0,6.2-8.78Z" transform="translate(-89.05 -82.46)"/><ellipse class="cls-3" cx="80.98" cy="127.99" rx="14.78" ry="14.81"/>
								</g>
								<g id="Pen_body">
									<rect class="cls-3" x="113.2" y="78.8" width="456" height="99" rx="30.18"/>
								
									<rect id="Pen_textBody" class="cls-4" x="131.2" y="88" width="426" height="80" rx="14.1"/>
								</g>
							</g>
							
							<g id="trigger"><rect class="cls-1" x="735.95" y="78.54" width="136" height="100" rx="11.88"/></g>
							
							<g id="Pen_head"><path class="mypenclip" d="M492.75,145.76c.32,1.23,4,.41,27,0,24.18-.43,47,0,47,0h0l.68-2.9c1.37-8.23,15-13,18.32-14.1,44.75-15.07,80-21,80-21,10.72-1.34,16.86-2.73,26-4a476.4,476.4,0,0,1,78-3c12.43.52,18.4,2.24,22,7,0,0,3.47,4.58,2,31l10,2c19.63,3.87,44.77-2.68,45.5-4.6.1-.27.17-.55.17-.55a13.82,13.82,0,0,0-.24-2.6c0-.19-.19-1.87-.43-5.25-.42-6,.87-18,1-18a6.68,6.68,0,0,1,0,1,3.55,3.55,0,0,1,0-1c.73-2.37,19,1,19,1,10.74,2,14.32,3.21,15,2,.94-1.65-4.28-6.54-8.58-9.9,0,0-25.92-20.4-87.48-20.4h0c-50.88.8-79.66,1.25-123.94,9.3a665.82,665.82,0,0,0-67.33,15.95C556.05,119.32,491.4,140.52,492.75,145.76Z" transform="translate(-89.05 -72.46) "/>
								
								<rect class="cls-2" x="531.2" y="46.8" width="288" height="162" rx="64.92"/>
							</g>
							<g id="OnOffICO">
								<g id="searchICO">                
									<rect id="searchicostick" class="cls-4" x="778.36" y="209.92" width="89" height="19.59" rx="9.79" transform="translate(307.32 -599.96) rotate(45)"/>
									<ellipse id="searchico" class="cls-5" cx="724.1" cy="126.09" rx="34.27" ry="34.56"/>
								</g>
								
								<rect id="stick1" class="cls-5" x="582.86" y="109.15" width="93" height="12.57" rx="6.28"/>
								<rect id="stick2" class="cls-4" x="593.82" y="135.15" width="74.54" height="12.57" rx="6.28"/>
							</g>
				
						</svg>
				
						<div class="mySearchPen">
							<input id="EditText" type="text" placeholder="Type to Search...">
							<div id="RadioBtn">
								<label>
									<input id="byTitle" type="radio" name="radio" checked/>
									<span>by title</span>
								</label>
								
								<label>
									<input id="byAuthor" type="radio" name="radio"/>
									<span>by author</span>
								</label>
							</div>           
						</div>
					</div>
				
				</div>
			</div>
			<div class="imgSliderView">
				<div class="slider-wrap">
					<div class="slider">
						<div class="slider-inner" id="allimages">							
							<!--All Images  -->						   
						</div>
					</div>
				</div>
			</div>


			<div class="lyricsView">
				<div class="lyricsContainer">
					<div class="gridheader">
						<h4 id= "searchInfo">Aamarkabita</h4>
						<div class="gridlistico">
							<img id="grid" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABmJLR0QA/wD/AP+gvaeTAAACpUlEQVR4nO3czWoTURiH8cfPha0LLbi3UJdatIqoS69HcFEF8Q4som79XOiVWAQRL8AKdt/adiF1ocZxMQHLScY2fU/iW3h+MJCTYd6ZM3+STDiHA5IkSZIkSZKkg+9QhRpTwBxwJFDjN7ACbHfsnwVOBeoDbAFfOvZN0/bhcKB+D/hMdx8mYh5YB5oK21fg4pBzvKhUvwGeDam/AGxUqr8OXNjTnRuTV0MuKrK9LurPVq7fAGeLc7ypXP/lCPdvQOQjCvGvkdLpXdo1zBTtcfdhJNFAVJmBJGMgyRhIMgaSjIEkYyDJGEgyBpKMgSRjIMkYSDIGkoyBJGMgyUQD2apyFX9t7tKuYaNoj7sPEzUPrFFv+HPYEO7zSvUb4OmQ+pdoh49r1F8Dzu/pznWoMcnhBHCO2CSH3SYI1JjksAmsduyrMVGjRztR43ughiQdJNHfkGPAInCj/3q/fgHLwAPgR7FvAbgNnAnUh/YH9yHwsXj/OHAHuA4cDdT/CbwFlvqv/4u71J3TdK+oP029SWwN7dPUVHGO+5X7sDjC/RsQ/R9yNXh86VrRnqPu3KwZ2ifCncbdh5FEA6n9T7+sF3kM7VLWHHcfJnew6jOQZAwkGQNJxkCSMZBkDCQZA0nGQJIxkGQMJBkDScZAkjGQZKKB9KpcRXe92vUncY5QvWgg74LHl5aL9grtKF8t68Cn4r1x92EkkTFkgEe0w5ZXiI3PN8CHfr2dtoGbwC3gZKA+wDfgMYPzppZox/QvB+s3wHvgSbCOJEn74opyLVeUG7K5olwFrig3uLmi3IhcUU57ZyDJGEgyBpKMgSRjIMkYSDIGkoyBJGMgyRhIMgaSjIEkYyDJGEgyrijninL/HP50RbnIwX2uKNdyRTlJkiRJkiRJUt8fWlnsaL1K/RoAAAAASUVORK5CYII="/>
							<img id="list" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAAjUlEQVR4nO3YUQpAQBRAUWT/W2YHInGn5pxvcXtNk96yAMC01hvPHB+8cxhbHVAzgDqgtgfffHqnvHV5J01/AgygDqgVd8BQ/wnTnwADqAMAgIyVWB1QM4A6oGYl9lfFqAygDqhZidUBNQOoAwCAjJVYHVAzgDqgZiX2V8WoDKAOqFmJ1QE1A6gDAIDMCfC/BlWnB/t+AAAAAElFTkSuQmCC"/>
						</div>
					</div>
					<div id="gridlistcontainer" class="gridlistcontainer">
					
						<div id="cards" class="cards">
							
					    <!--  <div class="cards-inner">
								<div>
								  <h4>Blessed</h4>
								  <small>Social Media</small>
								  <p>
									Lorem ipsum dolor sit amet consectetur adipisicing elit.
									Praesentium, temporibus.
								  </p>
								</div>
							  </div> -->          
						</div>
				  
					</div>
					<div class="gridfooter">
						<div id="load">
							<h4 id="showless">Show less</h4>
							<span style="padding-inline: 5px; font-size: small;">|</span>
							<h4 id="loadmore">Load more</h4>
						</div>

						
						<a id="showall" href="#">Show all</a>
					</div>
				</div>
			</div>



			<div style="display: none;" class="musicalAnimation" style="background-color: rgb(83, 94, 103);">
				<h1>Animation</h1>
				<p>Lorem ipsum dolor sit amet consectetur adipisicing elit.<br> Quis voluptatem </p>
			</div>

			
			<div class="promoAid">
				<div class="mainbox">
                    <div class="left">
						<video id="video1"
							style="--plyr-color-main: #0b123b; --plyr-video-background: #000000;"
							controls crossorigin playsinline poster="">
							<source src="https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-576p.mp4" type="video/mp4">	
						</video>        
                    </div>
                    <div class="right">

						<h1>
							Author Name1
						</h1>
						<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Culpa quibusdam officia ipsam perspiciatis eius ipsa itaque ullam magnam, totam laudantium!</p>
						<h4 class="tiny-header">Professional</h4>
						
					</div>
            	</div>
				
				<div class="mainbox">
					<div class="right">

						<h1>
							Author Name2
						</h1>
						<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Culpa quibusdam officia ipsam perspiciatis eius ipsa itaque ullam magnam, totam laudantium!</p>
						<h4 class="tiny-header">Professional</h4>
						
					</div>
                    <div class="left">
						<video id="video2"
							style="--plyr-color-main: #0b123b; --plyr-video-background: #000000;"
							controls crossorigin playsinline poster="">
							<source src="https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-576p.mp4" type="video/mp4">	
						</video>        
                    </div>
                    
            	</div>
				
			</div>
			<div style=" padding: 20px; text-align: center; ">
				<div style="display: flex; justify-content: center; "><b>
				<a class="login" href="./login/Aamarkabita Login.html">REGISTER</a> <a class="login">ABOUT</a></b>
				</div>
				
				<p style="margin-top: 5px; font-size: 14px;">Developed in Badriprasad College of Computer Technology, Sambalpur<br>By Blessed Deep & Sikha Sharma </p>
			</div>


</body>
<script>
	window.player = new Plyr("#video1");
	window.player = new Plyr("#video2");
</script>

<script type="module">
// Firebase Connection //
  // Import the functions you need from the SDKs you need
  import { getDatabase, set, ref,child, get } from "https://www.gstatic.com/firebasejs/9.9.0/firebase-database.js";
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.9.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyBJuDWwyEVOXy32Mr0sLOILyc3fK9Lh8YE",
    authDomain: "aamarkabita-f26f1.firebaseapp.com",
    projectId: "aamarkabita-f26f1",
    storageBucket: "aamarkabita-f26f1.appspot.com",
    messagingSenderId: "931707302921",
    appId: "1:931707302921:web:7414c005675a21100db4d8",
    measurementId: "G-EW0L9VSE35"
  };

  // Initialize Firebase
  const firebase = initializeApp(firebaseConfig);
  const analytics = getAnalytics(firebase);
  const database = getDatabase(firebase);

  // Database Activities //

// --------------GET ALL DATA and SORT--------------------------- //
	const showL = document.querySelector(".LoaderICO");
	function stopLoader() {
        showL.classList.toggle("stop-loader");
    }


	
  	const dbRef = ref(getDatabase());
    get(child(dbRef, `aamarkabita`)).then((snapshot) => {
    if (snapshot.exists()) {
		let arr = [];
        snapshot.forEach(function(childSnapshot)
        {
			childSnapshot.forEach(function(childSnapshot)
			{
				const key = childSnapshot.key;
            	const data = childSnapshot.val();
				if(!(childSnapshot.key=="username")){
					arr.push({id:key, date:data['date']});
				}
			})
            
        })
		//Sort the date
		arr.sort(function(a, b) {
			return (a.date < b.date) ? -1 : ((a.date > b.date) ? 1 : 0);
		});

		arr.forEach(function(sortedid){				
			snapshot.forEach(function(childSnapshot)
			{
				childSnapshot.forEach(function(childSnapshot)
				{
					const key = childSnapshot.key;
					if(sortedid['id']==key){
						const data = childSnapshot.val();
						if(!(childSnapshot.key=="username")){
							AddItemsToGrid(data['title'],data['author'],data['content'],key);
							AddItemImages(data['imageUrl'],data['title'],key);
						}
					}
				})						
			})								
		})
		stopLoader();
    } else {
        console.log("No data available");
    }
    }).catch((error) => {
    console.error(error);
    });
//----------------Show Item Images-----------------------//
function AddItemImages(imgUrl,title,key){
	const imagecontainer = document.getElementById('allimages');
	const imgcrd =`<div class="item" >
						<img src="${imgUrl}" >
						<h3 onclick="getmyId(this.id)" id="${key}">${title}</h3>                    
					</div>`;
	imagecontainer.innerHTML = imgcrd + imagecontainer.innerHTML;
}
	
//----------------Add to Grid ----------------------------------//
function AddItemsToGrid(title,author,content,key){
	
    const container = document.getElementById('cards');
	const subcontent = content.substring(0,51);
    const crd =`<div class="cards-inner">
					<div>
						<h4>${title}</h4>
						<small>${author}</small>
						<p>
							${subcontent}
						</p>
						<span onclick="getmyId(this.id)" id="${key}">
							Read More
						</span>
					</div>
				</div>`;
    // Append card element to the container
    container.innerHTML = crd + container.innerHTML;

}


//---------------------Search Module --------------------------------------------//////

document.getElementById("Go").addEventListener('click',function(){

	var node = document.getElementById("cards");
	var searchString = document.getElementById("EditText").value;
	var byTitle = document.getElementById("byTitle");
	var searchInfo = document.getElementById("searchInfo");
	const dbRef = ref(getDatabase());
	
	if(searchString!=""){
	
		while(node.hasChildNodes()){
			node.removeChild(node.lastChild);
		}	

		if(byTitle.checked){
			searchInfo.innerHTML="Search Result by Title";
		} else{
			searchInfo.innerHTML="Search Result Author";
		}

		get(child(dbRef, `aamarkabita`)).then((snapshot) => {
		if (snapshot.exists()) {
			snapshot.forEach(function(childSnapshot)
			{
				childSnapshot.forEach(function(childSnapshot)
				{
					const key = childSnapshot.key;
					const data = childSnapshot.val();
					if(!(childSnapshot.key=="username")){

						if( (byTitle.checked) && (searchString.toUpperCase() == data['title'].toUpperCase())){
							AddItemsToGrid(data['title'],data['author'],data['content'],key);
							
						} 
						else if(searchString.toUpperCase() == data['author'].toUpperCase()){
							AddItemsToGrid(data['title'],data['author'],data['content'],key);
							
						}
					}
				})
				
			})
		} else {
			console.log("No data available");
		}
		}).catch((error) => {
		console.error(error);
		});
	} else {
		alert("Please enter your query to search !")
	}	
	

})

</script>
<script>
	function getmyId(id){
		sessionStorage.setItem("GridID",id);
		window.open('content-view.html');

	}
</script>
	 		
</html>

