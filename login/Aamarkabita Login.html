<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>Aamarkabita Login</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="align" style="margin-top: 500px;">
      <div class="grid">
        <form action="" method="#" class="form login">
          <div class="form__field" style="display: flex; justify-content: center;">
            <h2 >Aamarkabita Login</h2>
          </div>
          <div class="form__field">
              <label for="login__username"><svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#user"></use></svg><span class="hidden">Username</span></label>
              <input id="login__username" type="email" name="username" class="form__input" placeholder="Username" required="">
          </div>
          <div class="form__field">
              <label for="login__password"><svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#lock"></use></svg><span class="hidden">Password</span></label>
              <input id="login__password" type="password" name="password" class="form__input" placeholder="Password" required="">
          </div>
          <div class="form__field">
            <input id="SignIn" type="submit" value="Sign In">
          </div>
        </form>
                <p class="text--center">Not a member? <a href="#m2-o" id="m2-c">Sign up now</a> </p>
                <!-- modal -->
                <div >
                  <div class="modal-container" id="m2-o">
                    <div class="modal">
                      <h1 class="modal__title">Sign Up</h1>
                      
                      <form action="" method="#" class="form login">
                          <div class="form__field">
                              <label for="login__username"><svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#user"></use></svg><span class="hidden">Username</span></label>
                              <input id="username" type="text" name="username" class="form__input" placeholder="Enter Your Name" required="">
                          </div>
                          <div class="form__field">
                              <label for="login__username"><svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#user"></use></svg><span class="hidden">Username</span></label>
                              <input id="email" type="email" name="username" class="form__input" placeholder="Email" required="">
                          </div>
                          <div class="form__field">
                              <label for="login__password"><svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#lock"></use></svg><span class="hidden">Password</span></label>
                              <input id="password" type="password" name="password" class="form__input" placeholder="Password" required="">
                          </div>
                        </form>
                        <button id="SignUp" class="modal__btn">Sign Up &rarr;</button>
                        <button class="modal__btn">with Google</button>
                        <a href="#m2-c" class="link-2"></a>
                    </div>
                  </div>
                </div>
                <!-- /modal -->
        </div>
      <svg xmlns="http://www.w3.org/2000/svg" class="icons"><symbol id="arrow-right" viewBox="0 0 1792 1792"><path d="M1600 960q0 54-37 91l-651 651q-39 37-91 37-51 0-90-37l-75-75q-38-38-38-91t38-91l293-293H245q-52 0-84.5-37.5T128 1024V896q0-53 32.5-90.5T245 768h704L656 474q-38-36-38-90t38-90l75-75q38-38 90-38 53 0 91 38l651 651q37 35 37 90z"></path></symbol><symbol id="lock" viewBox="0 0 1792 1792"><path d="M640 768h512V576q0-106-75-181t-181-75-181 75-75 181v192zm832 96v576q0 40-28 68t-68 28H416q-40 0-68-28t-28-68V864q0-40 28-68t68-28h32V576q0-184 132-316t316-132 316 132 132 316v192h32q40 0 68 28t28 68z"></path></symbol><symbol id="user" viewBox="0 0 1792 1792"><path d="M1600 1405q0 120-73 189.5t-194 69.5H459q-121 0-194-69.5T192 1405q0-53 3.5-103.5t14-109T236 1084t43-97.5 62-81 85.5-53.5T538 832q9 0 42 21.5t74.5 48 108 48T896 971t133.5-21.5 108-48 74.5-48 42-21.5q61 0 111.5 20t85.5 53.5 62 81 43 97.5 26.5 108.5 14 109 3.5 103.5zm-320-893q0 159-112.5 271.5T896 896 624.5 783.5 512 512t112.5-271.5T896 128t271.5 112.5T1280 512z"></path></symbol></svg>
    </div>


</body>
</html>
<script type="module">
  // Firebase Connection //
  // Import the functions you need from the SDKs you need
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.9.0/firebase-auth.js";
  import { getDatabase, set, ref,child, get } from "https://www.gstatic.com/firebasejs/9.9.0/firebase-database.js";
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.9.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyBJuDWwyEVOXy32Mr0sLOILyc3fK9Lh8YE",
    authDomain: "aamarkabita-f26f1.firebaseapp.com",
    projectId: "aamarkabita-f26f1",
    storageBucket: "aamarkabita-f26f1.appspot.com",
    messagingSenderId: "931707302921",
    appId: "1:931707302921:web:7414c005675a21100db4d8",
    measurementId: "G-EW0L9VSE35"
  };

  // Initialize Firebase
  const firebase = initializeApp(firebaseConfig);
  const analytics = getAnalytics(firebase);
  const database = getDatabase(firebase);
  
  // Database Activities //
  
  const auth = getAuth();
  
  
  document.getElementById("SignUp").addEventListener('click',(e)=>{
    
      var email = document.getElementById("email").value;
      var username = document.getElementById("username").value;
      var password = document.getElementById("password").value;
      createUserWithEmailAndPassword(auth, email, password)
      .then((userCredential) => {
        // Signed Up 
        const user = userCredential.user;
        set(ref(database,'aamarkabita/'+user.uid),{
                  username:username 
        });
        alert("User Created")
        // ...
      })
      .catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message;
        alert(errorMessage);
        // ..
      });
  })
  
  document.getElementById("SignIn").addEventListener('click',function(event){
    event.preventDefault();

    var email = document.getElementById("login__username").value;
    var password = document.getElementById("login__password").value;

    
    signInWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          // Signed in 
          const user = userCredential.user;
          sendmyUId(user.uid);

          // ...
        })
        .catch((error) => {
          const errorCode = error.code;
          const errorMessage = error.message;
          alert(errorMessage);
        });

  })
</script>
<script>
  function sendmyUId(uid){
    console.log(uid);
		sessionStorage.setItem("LoginUID",uid);
		window.open('publish/send.html');

	}
</script>